function bindEvents(){$("#addTag").on("click",function(t){$("#tag").toggle()}),$("#editImgs").on("click","i",function(t){var o=$(this);showDialog("确定删除?",function(){o.parent().remove()})}),$("#title").on(changeEvent,function(t){for(var o=this.value,i=0,n=0;n<o.length;n++)/[\u4e00-\u9fa5]/.test(o.charAt(n))&&i++;i>10?$(this).addClass("warn"):$(this).removeClass("warn")}),$("#submit").on("click",function(){var t=$("#title"),o=$("#content").trumbowyg("html"),i=[],n=$.trim($("#tag").val());return $.trim(t.val())?(t.removeClass("warn"),$.trim(o)?($("#editImgs").find("img").each(function(t,o){i.push(o.src)}),$("#loading").show(),void sendFn({r:"/user/publish",feed_id:FeedID,title:t.val(),content:o,img_url:i.join(","),tags:n},function(t){$("#loading").hide(),200==t.code?location.href="/article/"+FeedID:showDialog({txt:t.msg,confirm:"确认"})})):void showDialog({txt:"内容不能为空",confirm:"确认"},function(){$(".trumbowyg-editor").focus()})):(t.addClass("warn"),void showDialog({txt:"标题不能为空",confirm:"确认"},function(){t.focus()}))})}setTimeout(function(){$(".trumbowyg-editor").focus(),setTimeout(function(){$("#title").focus()},50)},300),$("#content").trumbowyg({svgPath:!1,resetCss:!0,removeformatPasted:!0,hideButtonTexts:!0,autogrow:!0,autogrowOnEnter:!0}),$(".img-list img").each(function(t,o){var i=$(o).parent();setImgPosition(i,o,!0)}),uploadImage(),bindEvents();